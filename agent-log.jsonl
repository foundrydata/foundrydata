{"ts":"2025-11-28T18:40:49.898Z","taskId":"9302.9302004","op":"subtask-complete","files":["packages/core/src/pipeline/orchestrator.ts","packages/core/src/pipeline/__tests__/pipeline-orchestrator.test.ts","PLAN.md"],"anchors":["cov://§3#coverage-model","cov://§3#dimensions","cov://§4#architecture-components"]}
{"ts":"2025-11-28T18:49:35.831Z","taskId":"9302.9302005","op":"subtask-complete","files":["packages/core/src/pipeline/__tests__/pipeline-orchestrator.test.ts","packages/core/test/e2e/pipeline.integration.spec.ts","PLAN.md"],"anchors":["cov://§3#coverage-model","cov://§3#dimensions","cov://§6#execution-modes"]}
{"ts":"2025-11-28T19:15:00.000Z","taskId":"9303.9303001","op":"subtask-complete","files":["packages/shared/src/types/coverage-report.ts","packages/shared/src/index.ts","packages/shared/src/coverage/__tests__/coverage-report-types.test.ts","PLAN.md"],"anchors":["cov://§7#json-coverage-report","cov://§7#thresholds-mincoverage"]}
{"ts":"2025-11-28T19:35:38.191Z","taskId":"9303.9303002","op":"subtask-complete","files":["packages/core/src/coverage/evaluator.ts","packages/core/src/coverage/__tests__/evaluator.test.ts","PLAN.md"],"anchors":["cov://§3#coverage-model","cov://§4#coverage-evaluator","cov://§7#json-coverage-report","cov://§7#thresholds-mincoverage"]}
{"ts":"2025-11-28T19:51:08.656Z","taskId":"9303.9303003","op":"subtask-complete","files":["packages/core/src/coverage/evaluator.ts","packages/core/src/coverage/index.ts","packages/core/src/coverage/__tests__/evaluator.test.ts","PLAN.md"],"anchors":["cov://§3#coverage-model","cov://§4#coverage-evaluator","cov://§7#json-coverage-report"]}
{"ts":"2025-11-28T20:07:11.798Z","taskId":"9303.9303004","op":"subtask-complete","files":["packages/core/src/pipeline/orchestrator.ts","packages/core/src/pipeline/types.ts","packages/core/src/api.ts","packages/core/src/pipeline/__tests__/pipeline-orchestrator.test.ts","PLAN.md"],"anchors":["cov://§3#coverage-model","cov://§4#coverage-evaluator","cov://§7#json-coverage-report"]}
{"ts":"2025-11-28T21:14:40.000Z","taskId":"9303.9303005","action":"subtask-completed","anchors":["cov://§3#coverage-model","cov://§4#coverage-evaluator","cov://§7#json-coverage-report"],"touchedFiles":["packages/core/src/coverage/__tests__/evaluator.test.ts","packages/core/src/coverage/__tests__/coverage-report-json.test.ts",".taskmaster/docs/9303-traceability.md","PLAN.md"],"notes":["Added coverage-report/v1 JSON snapshot tests asserting metrics, dimensionsEnabled and targetsByStatus stability","Updated parent traceability table for 9303 to mark DOD2, DOD5 and TS5 as covered by 9303.9303005"],"refonly":{"anchors":["cov://§3#coverage-model","cov://§4#coverage-evaluator","cov://§7#json-coverage-report"],"summary":"Snapshot tests validate coverage-report/v1 JSON structure, metrics and targetsByStatus for measure mode."}}
{"ts":"2025-11-28T21:31:00.000Z","taskId":"9303","action":"parent-task-spec-gap-fix","anchors":["cov://§3#coverage-model","cov://§4#coverage-evaluator","cov://§7#json-coverage-report"],"touchedFiles":["packages/core/src/pipeline/types.ts","packages/core/src/pipeline/orchestrator.ts","packages/core/src/coverage/__tests__/coverage-report-json.test.ts",".taskmaster/docs/9303-traceability.md"],"notes":["Wired PipelineOptions.coverage.minCoverage into CoverageEvaluator thresholds.overall and coverageStatus","Extended coverage-report/v1 JSON tests to assert pre-9310 byOperation empty yet metrics correct, thresholds.overall propagation and determinism of the normalised report across repeated runs"],"refonly":{"anchors":["cov://§3#coverage-model","cov://§4#coverage-evaluator","cov://§7#json-coverage-report"],"summary":"MinCoverage thresholds, determinism and pre-9310 byOperation behavior are now enforced and tested for coverage-report/v1."}}
{"ts":"2025-11-28T20:46:31.000Z","taskId":"9304.9304001","action":"subtask-completed","anchors":["cov://§6#execution-modes-ux","cov://§6#budget-profiles","cov://§7#cli-summary"],"touchedFiles":["packages/cli/src/index.ts","packages/cli/src/flags.ts","packages/cli/src/index.test.ts","packages/cli/src/__tests__/flags-options.test.ts",".taskmaster/docs/9304-traceability.md","PLAN.md"],"notes":["Added coverage-related CLI flags (mode, dimensions, minCoverage, report path, profile, excludeUnreachable) to generate and openapi commands while keeping coverage=off behavior unchanged.","Extended CLI tests and flag helper tests to cover the new options and created 9304 traceability plus PLAN.md scoped to subtask 9304.9304001."],"refonly":{"anchors":["cov://§6#execution-modes-ux","cov://§6#budget-profiles","cov://§7#cli-summary"],"summary":"CLI now exposes coverage flags for generate/openapi and tests verify they parse cleanly ahead of wiring full coverage semantics."}}
{"ts":"2025-11-28T20:58:11.000Z","taskId":"9304.9304002","action":"subtask-completed","anchors":["cov://§3#coverage-model","cov://§4#architecture-components","cov://§6#execution-modes-ux","cov://§6#budget-profiles","cov://§7#json-coverage-report"],"touchedFiles":["packages/cli/src/config/coverage-options.ts","packages/cli/src/index.ts","packages/cli/src/flags.ts","packages/cli/src/index.test.ts",".taskmaster/docs/9304-traceability.md","PLAN.md","packages/core/src/api.ts"],"notes":["Introduced resolveCliCoverageOptions to map CLI coverage flags to a structured config with validation, recommended defaults and explicit handling of coverage=off + min/report.","Wired CLI generate/openapi commands to pass coverage options into @foundrydata/core Generate API, which now forwards PipelineOptions.coverage to executePipeline, and added tests to assert warnings for coverage=off with min/report and untouched data semantics."],"refonly":{"anchors":["cov://§3#coverage-model","cov://§4#architecture-components","cov://§6#execution-modes-ux","cov://§6#budget-profiles","cov://§7#json-coverage-report"],"summary":"CLI coverage flags are now translated into PipelineOptions.coverage for the core pipeline with strict gating for coverage=off and validated dimensions/minCoverage semantics."}}
{"ts":"2025-11-28T21:08:48.000Z","taskId":"9304.9304003","action":"subtask-completed","anchors":["cov://§3#coverage-model","cov://§4#architecture-components","cov://§7#cli-summary"],"touchedFiles":["packages/cli/src/coverage/coverage-summary.ts","packages/cli/src/index.ts","packages/cli/src/__tests__/coverage-summary.test.ts","PLAN.md",".taskmaster/docs/9304-traceability.md"],"notes":["Implemented a deterministic coverage summary formatter that orders signals as byDimension, byOperation, overall, targetsByStatus, then planner caps/unsatisfied hints.","Wired CLI generate/openapi commands to print the summary to stderr when a coverage report is present, and added tests to assert ordering and stability of the formatted summary."],"refonly":{"anchors":["cov://§3#coverage-model","cov://§4#architecture-components","cov://§7#cli-summary"],"summary":"CLI now formats coverage-report/v1 into a CI-friendly summary that emphasizes per-dimension and per-operation coverage before the overall figure, including targetsByStatus and planner diagnostics."}}
{"ts":"2025-11-28T21:18:07.000Z","taskId":"9304.9304004","action":"subtask-completed","anchors":["cov://§3#coverage-model","cov://§4#architecture-components","cov://§6#execution-modes-ux","cov://§6#budget-profiles","cov://§7#cli-summary","cov://§7#thresholds-mincoverage"],"touchedFiles":["packages/cli/src/index.ts","packages/cli/src/index.test.ts","packages/cli/src/__tests__/coverage-summary.test.ts","PLAN.md",".taskmaster/docs/9304-traceability.md"],"notes":["Extended CLI tests to cover coverage=measure flows for generate/openapi commands, asserting presence of the coverage summary and preserving NDJSON payload validity.","Added a test that verifies unknown coverage dimensions are rejected with a clear error message, and exercised the summary formatter ordering more thoroughly."],"refonly":{"anchors":["cov://§3#coverage-model","cov://§4#architecture-components","cov://§6#execution-modes-ux","cov://§6#budget-profiles","cov://§7#cli-summary","cov://§7#thresholds-mincoverage"],"summary":"CLI tests now exercise coverage flags and summary output, including coverage=measure and validation of unknown coverage dimensions, aligned with coverage-aware V1 behavior."}}
{"ts":"2025-11-28T21:49:42.819Z","taskId":"9311.9311001","action":"set-status","status":"done","note":"Subtask completed: coverage diff classification logic + tests; build/test/bench green."}
{"ts":"2025-11-28T23:10:00.000Z","taskId":"9311.9311002","action":"subtask-completed","anchors":["cov://§7#json-coverage-report","cov://§7#multi-run-diff-m2","cov://§3#coverage-model"],"touchedFiles":["packages/reporter/src/coverage/coverage-diff.ts","packages/reporter/src/coverage/__tests__/coverage-diff.spec.ts","PLAN.md",".taskmaster/docs/9311-traceability.md"],"notes":["Added metric-aware diff summary over the common universe of targets and dimensions, with overall and per-operation deltas and regression detection.","Exposed newly uncovered targets (added uncovered and regressions from hit:true to hit:false) as explicit new gaps in the coverage diff summary.","Introduced unit tests covering improvements, regressions and newly enabled dimensions to keep coverage-diff.ts well covered."],"refonly":{"anchors":["cov://§7#json-coverage-report","cov://§7#multi-run-diff-m2","cov://§3#coverage-model"],"summary":"Metric deltas and regressions for coverage-report/v1 are computed over the common universe of targets and dimensions, with newly uncovered targets reported as explicit new gaps."}}
{"ts":"2025-11-28T23:32:00.000Z","taskId":"9311.9311003","action":"subtask-completed","anchors":["cov://§7#json-coverage-report","cov://§7#multi-run-diff-m2","cov://§3#coverage-model","cov://§7#cli-summary"],"touchedFiles":["packages/core/src/coverage/diff.ts","packages/core/src/coverage/index.ts","packages/reporter/src/coverage/coverage-diff.ts","packages/cli/src/commands/coverage-diff.ts","packages/cli/src/index.ts","packages/cli/src/index.test.ts",".taskmaster/docs/9311-traceability.md","PLAN.md"],"notes":["Moved coverage diff logic into @foundrydata/core as a dedicated coverage/diff module that operates purely on CoverageReport and CoverageTargetReport.","Refactored the reporter coverage-diff module into a thin facade over the core diff API, and wired a nested `foundrydata coverage diff` CLI subcommand that reads two coverage-report/v1 files, prints a CI-friendly summary and sets a non-zero exit code on regressions or new uncovered gaps.","Added CLI tests that exercise the new coverage diff command on synthetic CoverageReports, verifying summary output and exit code semantics, and ensured build/test/bench/typecheck all pass."],"refonly":{"anchors":["cov://§7#json-coverage-report","cov://§7#multi-run-diff-m2","cov://§3#coverage-model","cov://§7#cli-summary"],"summary":"Core now exposes a coverage diff API consumed by reporter and a `foundrydata coverage diff` CLI command that compares two coverage-report/v1 files and highlights regressions and newly uncovered targets."}}
{"ts":"2025-11-28T23:40:00.000Z","taskId":"9311.9311004","action":"subtask-completed","anchors":["cov://§7#json-coverage-report","cov://§7#multi-run-diff-m2","cov://§3#coverage-model"],"touchedFiles":["packages/core/src/coverage/diff.ts","packages/core/src/coverage/__tests__/coverage-diff.spec.ts","packages/reporter/src/coverage/coverage-diff.ts","packages/reporter/src/coverage/__tests__/coverage-diff.spec.ts","packages/cli/src/commands/coverage-diff.ts","packages/cli/src/index.test.ts",".taskmaster/docs/9311-traceability.md","PLAN.md"],"notes":["Added dedicated core tests for coverage diff over synthetic CoverageReports to validate target classification, metric deltas, handling of newly enabled dimensions and regressions with newly uncovered targets.","Kept the reporter coverage-diff façade wired to the core API and ensured its existing tests still exercise the diff behavior through the façade boundary.","Extended CLI tests for `foundrydata coverage diff` to exercise summary output and exit code semantics using JSON fixtures written to disk, while keeping build/test/bench/typecheck green."],"refonly":{"anchors":["cov://§7#json-coverage-report","cov://§7#multi-run-diff-m2","cov://§3#coverage-model"],"summary":"Coverage diff behavior is now exercised end-to-end via core, reporter façade and CLI tests using synthetic CoverageReports and JSON fixtures, covering key scenarios such as added/removed/statusChanged targets, regressions and newly uncovered gaps."}}
{"ts":"2025-11-28T22:57:41.044Z","taskId":"9307.9307001","action":"subtask-completed","anchors":["cov://§4#architecture-components","cov://§4#generator-instrumentation","cov://§8#technical-constraints-invariants"],"touchedFiles":["packages/core/src/coverage/events.ts","packages/core/src/coverage/__tests__/events.test.ts","packages/core/src/coverage/index.ts",".taskmaster/docs/9307-traceability.md","PLAN.md"],"notes":["Introduced per-instance coverage state and a streaming accumulator sharing a stable target index for structure/branches/enum targets.","Extended coverage events tests to cover streaming per-instance flows, commit semantics and diagnostic-only targets being ignored."],"refonly":{"anchors":["cov://§4#architecture-components","cov://§4#generator-instrumentation","cov://§8#technical-constraints-invariants"],"summary":"Per-instance coverage state and streaming accumulator are implemented in coverage/events with unit tests validating commit semantics and diagnostic target handling."}}
{"ts":"2025-11-28T23:08:03.190Z","taskId":"9307.9307002","action":"subtask-completed","anchors":["cov://§4#architecture-components","cov://§4#generator-instrumentation","cov://§8#technical-constraints-invariants"],"touchedFiles":["packages/core/src/coverage/events.ts","packages/core/src/coverage/index.ts","packages/core/src/generator/foundry-generator.ts","packages/core/src/repair/repair-engine.ts","packages/core/src/pipeline/orchestrator.ts","packages/core/src/pipeline/__tests__/pipeline-orchestrator.test.ts",".taskmaster/docs/9307-traceability.md","PLAN.md"],"notes":["Wired StreamingCoverageAccumulator into the pipeline orchestrator, using per-instance coverage state and commit semantics after validation.","Extended generator and repair coverage hooks to route events through emitForItem with stable instance indices, and added a pipeline test to exercise the streaming path while keeping outputs and coverage artifacts consistent."],"refonly":{"anchors":["cov://§4#architecture-components","cov://§4#generator-instrumentation","cov://§8#technical-constraints-invariants"],"summary":"Streaming coverage accumulator is now wired through Generate, Repair and Validate with per-instance state committed only after validation, and covered by pipeline tests."}}
{"ts":"2025-11-28T23:19:22.411Z","taskId":"9307.9307003","action":"subtask-completed","anchors":["cov://§4#architecture-components","cov://§4#generator-instrumentation","cov://§8#technical-constraints-invariants"],"touchedFiles":["packages/core/src/pipeline/orchestrator.ts","packages/core/src/generator/foundry-generator.ts","packages/core/src/repair/repair-engine.ts",".taskmaster/docs/9307-traceability.md",".taskmaster/docs/SPEC-QUESTION-skipped-validation-coverage.md","PLAN.md"],"notes":["Verified that coverage-report/v1 is computed exclusively from CoverageTargets and the streaming accumulator, with no second JSON parse or post-pass recomputation over generated/repaired items.","Documented the skippedValidation + coverage ambiguity in a SPEC-QUESTION and updated 9307 traceability/PLAN to state that V1 coverage relies solely on streaming instrumentation and CoverageEvaluator."],"refonly":{"anchors":["cov://§4#architecture-components","cov://§4#generator-instrumentation","cov://§8#technical-constraints-invariants"],"summary":"Post-pass coverage recomputation has been eliminated; coverage-report/v1 is now defined purely in terms of streaming instrumentation and CoverageEvaluator, with skippedValidation semantics tracked as a SPEC question."}}
