{"ts":"2025-11-28T18:40:49.898Z","taskId":"9302.9302004","op":"subtask-complete","files":["packages/core/src/pipeline/orchestrator.ts","packages/core/src/pipeline/__tests__/pipeline-orchestrator.test.ts","PLAN.md"],"anchors":["cov://§3#coverage-model","cov://§3#dimensions","cov://§4#architecture-components"]}
{"ts":"2025-11-28T18:49:35.831Z","taskId":"9302.9302005","op":"subtask-complete","files":["packages/core/src/pipeline/__tests__/pipeline-orchestrator.test.ts","packages/core/test/e2e/pipeline.integration.spec.ts","PLAN.md"],"anchors":["cov://§3#coverage-model","cov://§3#dimensions","cov://§6#execution-modes"]}
{"ts":"2025-11-28T19:15:00.000Z","taskId":"9303.9303001","op":"subtask-complete","files":["packages/shared/src/types/coverage-report.ts","packages/shared/src/index.ts","packages/shared/src/coverage/__tests__/coverage-report-types.test.ts","PLAN.md"],"anchors":["cov://§7#json-coverage-report","cov://§7#thresholds-mincoverage"]}
{"ts":"2025-11-28T19:35:38.191Z","taskId":"9303.9303002","op":"subtask-complete","files":["packages/core/src/coverage/evaluator.ts","packages/core/src/coverage/__tests__/evaluator.test.ts","PLAN.md"],"anchors":["cov://§3#coverage-model","cov://§4#coverage-evaluator","cov://§7#json-coverage-report","cov://§7#thresholds-mincoverage"]}
{"ts":"2025-11-28T19:51:08.656Z","taskId":"9303.9303003","op":"subtask-complete","files":["packages/core/src/coverage/evaluator.ts","packages/core/src/coverage/index.ts","packages/core/src/coverage/__tests__/evaluator.test.ts","PLAN.md"],"anchors":["cov://§3#coverage-model","cov://§4#coverage-evaluator","cov://§7#json-coverage-report"]}
{"ts":"2025-11-28T20:07:11.798Z","taskId":"9303.9303004","op":"subtask-complete","files":["packages/core/src/pipeline/orchestrator.ts","packages/core/src/pipeline/types.ts","packages/core/src/api.ts","packages/core/src/pipeline/__tests__/pipeline-orchestrator.test.ts","PLAN.md"],"anchors":["cov://§3#coverage-model","cov://§4#coverage-evaluator","cov://§7#json-coverage-report"]}
{"ts":"2025-11-28T21:14:40.000Z","taskId":"9303.9303005","action":"subtask-completed","anchors":["cov://§3#coverage-model","cov://§4#coverage-evaluator","cov://§7#json-coverage-report"],"touchedFiles":["packages/core/src/coverage/__tests__/evaluator.test.ts","packages/core/src/coverage/__tests__/coverage-report-json.test.ts",".taskmaster/docs/9303-traceability.md","PLAN.md"],"notes":["Added coverage-report/v1 JSON snapshot tests asserting metrics, dimensionsEnabled and targetsByStatus stability","Updated parent traceability table for 9303 to mark DOD2, DOD5 and TS5 as covered by 9303.9303005"],"refonly":{"anchors":["cov://§3#coverage-model","cov://§4#coverage-evaluator","cov://§7#json-coverage-report"],"summary":"Snapshot tests validate coverage-report/v1 JSON structure, metrics and targetsByStatus for measure mode."}}
{"ts":"2025-11-28T21:31:00.000Z","taskId":"9303","action":"parent-task-spec-gap-fix","anchors":["cov://§3#coverage-model","cov://§4#coverage-evaluator","cov://§7#json-coverage-report"],"touchedFiles":["packages/core/src/pipeline/types.ts","packages/core/src/pipeline/orchestrator.ts","packages/core/src/coverage/__tests__/coverage-report-json.test.ts",".taskmaster/docs/9303-traceability.md"],"notes":["Wired PipelineOptions.coverage.minCoverage into CoverageEvaluator thresholds.overall and coverageStatus","Extended coverage-report/v1 JSON tests to assert pre-9310 byOperation empty yet metrics correct, thresholds.overall propagation and determinism of the normalised report across repeated runs"],"refonly":{"anchors":["cov://§3#coverage-model","cov://§4#coverage-evaluator","cov://§7#json-coverage-report"],"summary":"MinCoverage thresholds, determinism and pre-9310 byOperation behavior are now enforced and tested for coverage-report/v1."}}
{"ts":"2025-11-28T20:46:31.000Z","taskId":"9304.9304001","action":"subtask-completed","anchors":["cov://§6#execution-modes-ux","cov://§6#budget-profiles","cov://§7#cli-summary"],"touchedFiles":["packages/cli/src/index.ts","packages/cli/src/flags.ts","packages/cli/src/index.test.ts","packages/cli/src/__tests__/flags-options.test.ts",".taskmaster/docs/9304-traceability.md","PLAN.md"],"notes":["Added coverage-related CLI flags (mode, dimensions, minCoverage, report path, profile, excludeUnreachable) to generate and openapi commands while keeping coverage=off behavior unchanged.","Extended CLI tests and flag helper tests to cover the new options and created 9304 traceability plus PLAN.md scoped to subtask 9304.9304001."],"refonly":{"anchors":["cov://§6#execution-modes-ux","cov://§6#budget-profiles","cov://§7#cli-summary"],"summary":"CLI now exposes coverage flags for generate/openapi and tests verify they parse cleanly ahead of wiring full coverage semantics."}}
{"ts":"2025-11-28T20:58:11.000Z","taskId":"9304.9304002","action":"subtask-completed","anchors":["cov://§3#coverage-model","cov://§4#architecture-components","cov://§6#execution-modes-ux","cov://§6#budget-profiles","cov://§7#json-coverage-report"],"touchedFiles":["packages/cli/src/config/coverage-options.ts","packages/cli/src/index.ts","packages/cli/src/flags.ts","packages/cli/src/index.test.ts",".taskmaster/docs/9304-traceability.md","PLAN.md","packages/core/src/api.ts"],"notes":["Introduced resolveCliCoverageOptions to map CLI coverage flags to a structured config with validation, recommended defaults and explicit handling of coverage=off + min/report.","Wired CLI generate/openapi commands to pass coverage options into @foundrydata/core Generate API, which now forwards PipelineOptions.coverage to executePipeline, and added tests to assert warnings for coverage=off with min/report and untouched data semantics."],"refonly":{"anchors":["cov://§3#coverage-model","cov://§4#architecture-components","cov://§6#execution-modes-ux","cov://§6#budget-profiles","cov://§7#json-coverage-report"],"summary":"CLI coverage flags are now translated into PipelineOptions.coverage for the core pipeline with strict gating for coverage=off and validated dimensions/minCoverage semantics."}}
{"ts":"2025-11-28T21:08:48.000Z","taskId":"9304.9304003","action":"subtask-completed","anchors":["cov://§3#coverage-model","cov://§4#architecture-components","cov://§7#cli-summary"],"touchedFiles":["packages/cli/src/coverage/coverage-summary.ts","packages/cli/src/index.ts","packages/cli/src/__tests__/coverage-summary.test.ts","PLAN.md",".taskmaster/docs/9304-traceability.md"],"notes":["Implemented a deterministic coverage summary formatter that orders signals as byDimension, byOperation, overall, targetsByStatus, then planner caps/unsatisfied hints.","Wired CLI generate/openapi commands to print the summary to stderr when a coverage report is present, and added tests to assert ordering and stability of the formatted summary."],"refonly":{"anchors":["cov://§3#coverage-model","cov://§4#architecture-components","cov://§7#cli-summary"],"summary":"CLI now formats coverage-report/v1 into a CI-friendly summary that emphasizes per-dimension and per-operation coverage before the overall figure, including targetsByStatus and planner diagnostics."}}
{"ts":"2025-11-28T21:18:07.000Z","taskId":"9304.9304004","action":"subtask-completed","anchors":["cov://§3#coverage-model","cov://§4#architecture-components","cov://§6#execution-modes-ux","cov://§6#budget-profiles","cov://§7#cli-summary","cov://§7#thresholds-mincoverage"],"touchedFiles":["packages/cli/src/index.ts","packages/cli/src/index.test.ts","packages/cli/src/__tests__/coverage-summary.test.ts","PLAN.md",".taskmaster/docs/9304-traceability.md"],"notes":["Extended CLI tests to cover coverage=measure flows for generate/openapi commands, asserting presence of the coverage summary and preserving NDJSON payload validity.","Added a test that verifies unknown coverage dimensions are rejected with a clear error message, and exercised the summary formatter ordering more thoroughly."],"refonly":{"anchors":["cov://§3#coverage-model","cov://§4#architecture-components","cov://§6#execution-modes-ux","cov://§6#budget-profiles","cov://§7#cli-summary","cov://§7#thresholds-mincoverage"],"summary":"CLI tests now exercise coverage flags and summary output, including coverage=measure and validation of unknown coverage dimensions, aligned with coverage-aware V1 behavior."}}
{"ts":"2025-11-28T21:49:42.819Z","taskId":"9311.9311001","action":"set-status","status":"done","note":"Subtask completed: coverage diff classification logic + tests; build/test/bench green."}
{"ts":"2025-11-28T23:10:00.000Z","taskId":"9311.9311002","action":"subtask-completed","anchors":["cov://§7#json-coverage-report","cov://§7#multi-run-diff-m2","cov://§3#coverage-model"],"touchedFiles":["packages/reporter/src/coverage/coverage-diff.ts","packages/reporter/src/coverage/__tests__/coverage-diff.spec.ts","PLAN.md",".taskmaster/docs/9311-traceability.md"],"notes":["Added metric-aware diff summary over the common universe of targets and dimensions, with overall and per-operation deltas and regression detection.","Exposed newly uncovered targets (added uncovered and regressions from hit:true to hit:false) as explicit new gaps in the coverage diff summary.","Introduced unit tests covering improvements, regressions and newly enabled dimensions to keep coverage-diff.ts well covered."],"refonly":{"anchors":["cov://§7#json-coverage-report","cov://§7#multi-run-diff-m2","cov://§3#coverage-model"],"summary":"Metric deltas and regressions for coverage-report/v1 are computed over the common universe of targets and dimensions, with newly uncovered targets reported as explicit new gaps."}}
{"ts":"2025-11-28T23:32:00.000Z","taskId":"9311.9311003","action":"subtask-completed","anchors":["cov://§7#json-coverage-report","cov://§7#multi-run-diff-m2","cov://§3#coverage-model","cov://§7#cli-summary"],"touchedFiles":["packages/core/src/coverage/diff.ts","packages/core/src/coverage/index.ts","packages/reporter/src/coverage/coverage-diff.ts","packages/cli/src/commands/coverage-diff.ts","packages/cli/src/index.ts","packages/cli/src/index.test.ts",".taskmaster/docs/9311-traceability.md","PLAN.md"],"notes":["Moved coverage diff logic into @foundrydata/core as a dedicated coverage/diff module that operates purely on CoverageReport and CoverageTargetReport.","Refactored the reporter coverage-diff module into a thin facade over the core diff API, and wired a nested `foundrydata coverage diff` CLI subcommand that reads two coverage-report/v1 files, prints a CI-friendly summary and sets a non-zero exit code on regressions or new uncovered gaps.","Added CLI tests that exercise the new coverage diff command on synthetic CoverageReports, verifying summary output and exit code semantics, and ensured build/test/bench/typecheck all pass."],"refonly":{"anchors":["cov://§7#json-coverage-report","cov://§7#multi-run-diff-m2","cov://§3#coverage-model","cov://§7#cli-summary"],"summary":"Core now exposes a coverage diff API consumed by reporter and a `foundrydata coverage diff` CLI command that compares two coverage-report/v1 files and highlights regressions and newly uncovered targets."}}
{"ts":"2025-11-28T23:40:00.000Z","taskId":"9311.9311004","action":"subtask-completed","anchors":["cov://§7#json-coverage-report","cov://§7#multi-run-diff-m2","cov://§3#coverage-model"],"touchedFiles":["packages/core/src/coverage/diff.ts","packages/core/src/coverage/__tests__/coverage-diff.spec.ts","packages/reporter/src/coverage/coverage-diff.ts","packages/reporter/src/coverage/__tests__/coverage-diff.spec.ts","packages/cli/src/commands/coverage-diff.ts","packages/cli/src/index.test.ts",".taskmaster/docs/9311-traceability.md","PLAN.md"],"notes":["Added dedicated core tests for coverage diff over synthetic CoverageReports to validate target classification, metric deltas, handling of newly enabled dimensions and regressions with newly uncovered targets.","Kept the reporter coverage-diff façade wired to the core API and ensured its existing tests still exercise the diff behavior through the façade boundary.","Extended CLI tests for `foundrydata coverage diff` to exercise summary output and exit code semantics using JSON fixtures written to disk, while keeping build/test/bench/typecheck green."],"refonly":{"anchors":["cov://§7#json-coverage-report","cov://§7#multi-run-diff-m2","cov://§3#coverage-model"],"summary":"Coverage diff behavior is now exercised end-to-end via core, reporter façade and CLI tests using synthetic CoverageReports and JSON fixtures, covering key scenarios such as added/removed/statusChanged targets, regressions and newly uncovered gaps."}}
{"ts":"2025-11-28T22:57:41.044Z","taskId":"9307.9307001","action":"subtask-completed","anchors":["cov://§4#architecture-components","cov://§4#generator-instrumentation","cov://§8#technical-constraints-invariants"],"touchedFiles":["packages/core/src/coverage/events.ts","packages/core/src/coverage/__tests__/events.test.ts","packages/core/src/coverage/index.ts",".taskmaster/docs/9307-traceability.md","PLAN.md"],"notes":["Introduced per-instance coverage state and a streaming accumulator sharing a stable target index for structure/branches/enum targets.","Extended coverage events tests to cover streaming per-instance flows, commit semantics and diagnostic-only targets being ignored."],"refonly":{"anchors":["cov://§4#architecture-components","cov://§4#generator-instrumentation","cov://§8#technical-constraints-invariants"],"summary":"Per-instance coverage state and streaming accumulator are implemented in coverage/events with unit tests validating commit semantics and diagnostic target handling."}}
{"ts":"2025-11-28T23:08:03.190Z","taskId":"9307.9307002","action":"subtask-completed","anchors":["cov://§4#architecture-components","cov://§4#generator-instrumentation","cov://§8#technical-constraints-invariants"],"touchedFiles":["packages/core/src/coverage/events.ts","packages/core/src/coverage/index.ts","packages/core/src/generator/foundry-generator.ts","packages/core/src/repair/repair-engine.ts","packages/core/src/pipeline/orchestrator.ts","packages/core/src/pipeline/__tests__/pipeline-orchestrator.test.ts",".taskmaster/docs/9307-traceability.md","PLAN.md"],"notes":["Wired StreamingCoverageAccumulator into the pipeline orchestrator, using per-instance coverage state and commit semantics after validation.","Extended generator and repair coverage hooks to route events through emitForItem with stable instance indices, and added a pipeline test to exercise the streaming path while keeping outputs and coverage artifacts consistent."],"refonly":{"anchors":["cov://§4#architecture-components","cov://§4#generator-instrumentation","cov://§8#technical-constraints-invariants"],"summary":"Streaming coverage accumulator is now wired through Generate, Repair and Validate with per-instance state committed only after validation, and covered by pipeline tests."}}
{"ts":"2025-11-28T23:19:22.411Z","taskId":"9307.9307003","action":"subtask-completed","anchors":["cov://§4#architecture-components","cov://§4#generator-instrumentation","cov://§8#technical-constraints-invariants"],"touchedFiles":["packages/core/src/pipeline/orchestrator.ts","packages/core/src/generator/foundry-generator.ts","packages/core/src/repair/repair-engine.ts",".taskmaster/docs/9307-traceability.md",".taskmaster/docs/SPEC-QUESTION-skipped-validation-coverage.md","PLAN.md"],"notes":["Verified that coverage-report/v1 is computed exclusively from CoverageTargets and the streaming accumulator, with no second JSON parse or post-pass recomputation over generated/repaired items.","Documented the skippedValidation + coverage ambiguity in a SPEC-QUESTION and updated 9307 traceability/PLAN to state that V1 coverage relies solely on streaming instrumentation and CoverageEvaluator."],"refonly":{"anchors":["cov://§4#architecture-components","cov://§4#generator-instrumentation","cov://§8#technical-constraints-invariants"],"summary":"Post-pass coverage recomputation has been eliminated; coverage-report/v1 is now defined purely in terms of streaming instrumentation and CoverageEvaluator, with skippedValidation semantics tracked as a SPEC question."}}
{"ts":"2025-11-28T23:24:06.258Z","taskId":"9307.9307004","action":"subtask-completed","anchors":["cov://§4#architecture-components","cov://§4#generator-instrumentation","cov://§8#technical-constraints-invariants"],"touchedFiles":["scripts/bench-core.ts","scripts/bench-config.ts","test/scripts/bench.test.ts",".taskmaster/docs/9307-traceability.md","PLAN.md"],"notes":["Used the existing bench harness to run the simple profile with coverage=measure via pipelineOverrides, asserting that p95 latency and memory remain within BENCH_BUDGETS.","Documented streaming coverage overhead measurement in the 9307 traceability file and PLAN, keeping the CLI bench script unchanged while exercising coverage-aware runs through tests."],"refonly":{"anchors":["cov://§4#architecture-components","cov://§4#generator-instrumentation","cov://§8#technical-constraints-invariants"],"summary":"Streaming coverage overhead is now measured through the bench harness on the simple profile under coverage=measure, with tests enforcing BENCH_BUDGETS for latency and memory."}}
{"ts":"2025-11-28T23:45:00.000Z","taskId":"9305.9305001","action":"subtask-completed","anchors":["cov://§4#architecture-components","cov://§4#coverage-planner","cov://§5#hints-interaction-with-repair"],"touchedFiles":["packages/core/src/coverage/coverage-planner.ts","packages/core/src/coverage/index.ts","packages/core/src/coverage/__tests__/coverage-planner.test.ts","packages/core/src/pipeline/types.ts",".taskmaster/docs/9305-traceability.md","PLAN.md"],"notes":["Introduced TestUnit, hint and planner configuration types for coverage=guided, including caps placeholders and planner input wiring against CoverageGraph and CoverageTargets.","Exposed planner options via PipelineOptions.coverage.planner and added unit tests that exercise resolveCoveragePlannerConfig and hint validation helpers, ensuring high coverage for the new module."],"refonly":{"anchors":["cov://§4#architecture-components","cov://§4#coverage-planner","cov://§5#hints-interaction-with-repair"],"summary":"Static TestUnit, hint and planner config types are defined and wired into core coverage and pipeline options, with tests covering planner config resolution and hint validation."}}
{"ts":"2025-11-28T23:55:00.000Z","taskId":"9305.9305002","action":"subtask-completed","anchors":["cov://§4#coverage-planner","cov://§5#hints-interaction-with-repair","cov://§6#execution-modes-ux","cov://§6#budget-profiles"],"touchedFiles":["packages/core/src/coverage/coverage-planner.ts","packages/core/src/coverage/index.ts","packages/core/src/coverage/__tests__/coverage-planner.test.ts",".taskmaster/docs/9305-traceability.md","PLAN.md"],"notes":["Implemented a static greedy planner function planTestUnits that orders active targets by operation, dimension priority, weight and canonPath, then assigns each target to a single TestUnit while respecting the global maxInstances budget.","Added unit tests that exercise planner ordering, budget enforcement and operation-level prioritization using synthetic CoverageTargets, keeping caps, diagnostics and advanced seed derivation out of scope for this subtask."],"refonly":{"anchors":["cov://§4#coverage-planner","cov://§5#hints-interaction-with-repair","cov://§6#execution-modes-ux","cov://§6#budget-profiles"],"summary":"Greedy planner ordering and maxInstances budget handling are implemented and covered by tests, leaving caps diagnostics and deterministic seed derivation to later subtasks."}}
{"ts":"2025-11-28T23:59:00.000Z","taskId":"9305.9305003","action":"subtask-completed","anchors":["cov://§4#coverage-planner","cov://§6#execution-modes-ux","cov://§6#budget-profiles"],"touchedFiles":["packages/core/src/coverage/coverage-planner-caps.ts","packages/core/src/coverage/index.ts","packages/core/src/coverage/__tests__/coverage-planner-caps.test.ts",".taskmaster/docs/9305-traceability.md","PLAN.md"],"notes":["Added applyPlannerCaps helper that enforces deterministic caps per dimension, schema path and operation over active targets, producing plannerCapsHit-style aggregates and marking unplanned targets with meta.planned:false.","Covered planner caps behavior with unit tests across no-cap, per-dimension and per-operation scenarios, ensuring deterministic counts of total/planned/unplanned targets per scope without yet wiring diagnostics into the coverage report pipeline."],"refonly":{"anchors":["cov://§4#coverage-planner","cov://§6#execution-modes-ux","cov://§6#budget-profiles"],"summary":"Planner caps are implemented as a deterministic helper that marks unplanned targets via meta.planned:false and produces plannerCapsHit-compatible summaries, with focused unit tests over synthetic targets."}}
{"ts":"2025-11-29T00:03:00.000Z","taskId":"9305.9305004","action":"subtask-completed","anchors":["cov://§4#coverage-planner","cov://§6#execution-modes-ux"],"touchedFiles":["packages/core/src/coverage/coverage-planner.ts","packages/core/src/coverage/index.ts","packages/core/src/coverage/__tests__/coverage-planner.test.ts",".taskmaster/docs/9305-traceability.md","PLAN.md"],"notes":["Added assignTestUnitSeeds helper that derives per-TestUnit seeds deterministically from a normalized masterSeed and stable unit identifiers using the existing XorShift32 RNG model.","Extended planner tests to assert that seeds remain stable for a fixed masterSeed and change predictably when masterSeed varies, without introducing any additional RNG source or global state."],"refonly":{"anchors":["cov://§4#coverage-planner","cov://§6#execution-modes-ux"],"summary":"Deterministic TestUnit seed derivation from masterSeed is implemented via assignTestUnitSeeds and covered by planner unit tests."}}
{"ts":"2025-11-29T00:07:00.000Z","taskId":"9305.9305005","action":"subtask-completed","anchors":["cov://§3#coverage-model","cov://§4#coverage-planner","cov://§6#execution-modes-ux"],"touchedFiles":["packages/core/test/e2e/coverage-guided-planner.spec.ts",".taskmaster/docs/9305-traceability.md","PLAN.md"],"notes":["Added an end-to-end test that runs executePipeline on a simple oneOf+enum schema under coverage=measure and coverage=guided with identical seeds and budgets, asserting that guided mode achieves at least as much branches and enum coverage as measure.","Kept the test focused on metrics.byDimension for branches/enum, without asserting on internal TestUnit ordering or planner caps details, to remain robust against future scheduling heuristics while still validating guided planning behavior."],"refonly":{"anchors":["cov://§3#coverage-model","cov://§4#coverage-planner","cov://§6#execution-modes-ux"],"summary":"An e2e pipeline test now demonstrates that coverage=guided achieves coverage on branches/enum at least as good as coverage=measure on a simple schema, under the same seed and maxInstances."}}
{"ts":"2025-11-29T01:55:00.000Z","taskId":"9306.9306002","action":"subtask-completed","anchors":["cov://§4#generator-instrumentation","cov://§5#hint-types","cov://§5#priority-conflict-resolution"],"touchedFiles":["packages/core/src/generator/foundry-generator.ts","packages/core/src/generator/__tests__/generator-hints.spec.ts",".taskmaster/docs/9306-traceability.md","PLAN.md"],"notes":["Extended the generator options to carry guided coverage hints per TestUnit and built a canonical-path index of hints for deterministic lookup.","Hooked hint consumption into branch selection for oneOf/anyOf, enum value selection and optional property ordering in coverage=guided mode only, and added generator-level tests that demonstrate hint effects while keeping coverage=measure behavior unchanged."],"refonly":{"anchors":["cov://§4#generator-instrumentation","cov://§5#hint-types","cov://§5#priority-conflict-resolution"],"summary":"Generator now consumes guided coverage hints for branches, properties and enums via a canonical-path hints index, with tests confirming that only coverage=guided runs are affected."}}
{"ts":"2025-11-29T01:20:00.000Z","taskId":"9306.9306001","action":"subtask-completed","anchors":["cov://§5#hint-types","cov://§5#priority-conflict-resolution"],"touchedFiles":["packages/core/src/coverage/coverage-planner.ts","packages/core/src/coverage/__tests__/coverage-planner.test.ts","packages/core/src/coverage/index.ts",".taskmaster/docs/9306-traceability.md","PLAN.md"],"notes":["Added explicit coverage hint kind priority constants and helpers, encoding the global order coverEnumValue > preferBranch > ensurePropertyPresence.","Implemented resolveCoverageHintConflicts to apply per-kind priority and first-in-hints[] semantics for identical (kind, canonPath, index/property) tuples, and extended coverage-planner tests to cover these rules."],"refonly":{"anchors":["cov://§5#hint-types","cov://§5#priority-conflict-resolution"],"summary":"Coverage hint types now have explicit global priority and conflict-resolution helpers, with unit tests validating priority ordering and first-in-hints[] semantics."}}
{"ts":"2025-11-29T02:05:00.000Z","taskId":"9306.9306003","action":"subtask-completed","anchors":["cov://§4#generator-instrumentation","cov://§5#unsatisfied-hints-repair"],"touchedFiles":["packages/core/src/generator/foundry-generator.ts","packages/core/src/generator/__tests__/generator-hints.spec.ts",".taskmaster/docs/9306-traceability.md","PLAN.md"],"notes":["Extended generator coverage options with a recordUnsatisfiedHint callback and implemented detection for unsatisfied ensurePropertyPresence and coverEnumValue hints in coverage=guided mode when properties are absent or enum indices are out of range.","Added generator-level tests that exercise unsatisfied hint recording and confirm that guided runs can emit UnsatisfiedHint entries while still producing AJV-valid instances and leaving coverage metrics unchanged."],"refonly":{"anchors":["cov://§4#generator-instrumentation","cov://§5#unsatisfied-hints-repair"],"summary":"Generator now reports unsatisfied hints for missing properties and invalid enum indices via a dedicated callback in guided mode, with focused tests validating the diagnostics-only contract."}}
{"ts":"2025-11-29T02:10:00.000Z","taskId":"9306.9306004","action":"subtask-completed","anchors":["cov://§5#priority-conflict-resolution","cov://§6#execution-modes-ux"],"touchedFiles":["packages/core/src/coverage/coverage-planner.ts","packages/core/src/coverage/__tests__/coverage-planner.test.ts","packages/core/src/generator/foundry-generator.ts","packages/core/src/generator/__tests__/generator-hints.spec.ts",".taskmaster/docs/9306-traceability.md","PLAN.md"],"notes":["Strengthened coverage-planner tests for resolveCoverageHintConflicts to assert the fixed global kind priority, first-in-hints[] semantics per tuple and stability of effective hints across runs for the same input set.","Extended generator-hints tests to cover combined coverEnumValue + ensurePropertyPresence scenarios and to assert that repeated guided runs with identical hints and seeds produce stable branch/enum/property decisions, without affecting coverage=measure behavior."],"refonly":{"anchors":["cov://§5#priority-conflict-resolution","cov://§6#execution-modes-ux"],"summary":"Planner and generator tests now exercise hint precedence and determinism end-to-end at unit level, confirming the global kind priority, first-in-wins ordering and stability across guided runs for fixed schemas, hints and options."}}
{"ts":"2025-11-29T02:18:00.000Z","taskId":"9306.9306005","action":"subtask-completed","anchors":["cov://§3#coverage-model","cov://§5#hint-types","cov://§6#execution-modes-ux"],"touchedFiles":["packages/core/src/generator/__tests__/generator-hints.spec.ts",".taskmaster/docs/9306-traceability.md","PLAN.md"],"notes":["Extended generator-hints tests to exercise guided hints on combined oneOf+enum schemas, asserting that for a fixed schema, hints set and seed the generated instances respect preferBranch and coverEnumValue hints deterministically.","These tests complement the existing coverage-guided planner e2e test by focusing on hint-driven behavior at the generator level, keeping coverage metrics and planner integration unchanged for M1."],"refonly":{"anchors":["cov://§3#coverage-model","cov://§5#hint-types","cov://§6#execution-modes-ux"],"summary":"Generator-level tests now cover guided hints on oneOf+enum schemas end-to-end, demonstrating deterministic branch and enum steering for fixed inputs without altering the pipeline orchestrator."}}
{"ts":"2025-11-29T01:35:06.965Z","taskId":"9306.9306006","action":"subtask-completed","anchors":["cov://§4#coverage-planner","cov://§5#hint-types","cov://§6#execution-modes-ux"],"touchedFiles":["packages/core/src/pipeline/orchestrator.ts","packages/core/src/coverage/coverage-planner.ts","packages/core/src/coverage/__tests__/coverage-planner.test.ts","packages/core/test/e2e/coverage-guided-planner.spec.ts",".taskmaster/docs/9306-traceability.md","PLAN.md"],"notes":["Wired CoveragePlanner output (caps-adjusted targets and TestUnits) into executePipeline, deriving deterministic TestUnit seeds from the generate seed and aggregating planner hints into the generator coverage options in coverage=guided mode only.","Extended planner and end-to-end pipeline tests to assert that TestUnits carry preferBranch hints for branch targets, and that coverage=guided executePipeline runs on a oneOf+enum schema remain deterministic and achieve branches/enum coverage at least as good as coverage=measure under the same budget."],"refonly":{"anchors":["cov://§4#coverage-planner","cov://§5#hint-types","cov://§6#execution-modes-ux"],"summary":"Planner-produced TestUnits and branch/enum hints are now wired through the pipeline orchestrator into the generator for coverage=guided runs, with executePipeline tests demonstrating deterministic behavior and non-regressing branches/enum coverage versus coverage=measure."}}
{"ts":"2025-11-29T11:12:50.3NZ","taskId":"9306.9306007","action":"subtask-completed","anchors":["cov://§3#dimensions-v1","cov://§4#coverage-planner","cov://§5#hint-types","cov://§5#priority-conflict-resolution"],"touchedFiles":["packages/core/src/coverage/coverage-planner.ts","packages/core/src/coverage/__tests__/coverage-planner.test.ts",".taskmaster/docs/9306-traceability.md","PLAN.md"],"notes":["Extended CoveragePlanner to derive ensurePropertyPresence(schemaPath, propertyName, present:true) hints from structural PROPERTY_PRESENT targets, mapping each target to its owning object schema path while leaving CoverageTarget IDs, ordering and statuses unchanged and without introducing any new CoverageIndex heuristics.","Strengthened coverage-planner tests to assert ensurePropertyPresence hints for root and nested properties and to confirm that hints are produced only when the 'structure' dimension is enabled, keeping planner output deterministic for fixed targets and planner configuration."],"refonly":{"anchors":["cov://§3#dimensions-v1","cov://§4#coverage-planner","cov://§5#hint-types","cov://§5#priority-conflict-resolution"],"summary":"CoveragePlanner now projects PROPERTY_PRESENT targets into ensurePropertyPresence(present:true) hints on owning object schema nodes, with planner-level tests validating the mapping, dimensionsEnabled gating and determinism."}}
{"ts":"2025-11-29T11:34:03.3NZ","taskId":"9306.9306008","action":"subtask-completed","anchors":["cov://§5#unsatisfied-hints-repair","cov://§6#execution-modes-ux","cov://§7#json-coverage-report"],"touchedFiles":["packages/core/src/pipeline/orchestrator.ts","packages/core/src/pipeline/__tests__/pipeline-orchestrator.test.ts",".taskmaster/docs/9306-traceability.md","PLAN.md"],"notes":["Extended the pipeline orchestrator to aggregate UnsatisfiedHint entries reported by the generator in coverage=guided mode via a CoverageHookOptions.recordUnsatisfiedHint callback and to surface them in artifacts.coverageReport.unsatisfiedHints without changing coverage metrics or minCoverage enforcement semantics.","Added executePipeline-level tests that exercise a guided run with an intentionally invalid coverEnumValue hint and assert that coverageReport.unsatisfiedHints contains the expected diagnostic entry while coverage metrics and coverageStatus remain consistent with the underlying coverage evaluation."],"refonly":{"anchors":["cov://§5#unsatisfied-hints-repair","cov://§6#execution-modes-ux","cov://§7#json-coverage-report"],"summary":"Pipeline now collects generator-side unsatisfied hints in guided runs and exposes them in coverage-report/v1 as diagnostic-only UnsatisfiedHint entries, validated by an executePipeline test scenario."}}
{"ts":"2025-11-29T11:44:14.3NZ","taskId":"9306.9306005","action":"subtask-completed","anchors":["cov://§3#coverage-model","cov://§5#hint-types","cov://§6#execution-modes-ux"],"touchedFiles":["packages/core/src/generator/__tests__/generator-hints.spec.ts",".taskmaster/docs/9306-traceability.md","PLAN.md"],"notes":["Confirmed and documented generator-level tests that exercise guided coverage hints on schemas combining oneOf and enum, ensuring that preferBranch and coverEnumValue hints steer branch and enum choices deterministically for fixed (schema, options, seed) while keeping coverage=measure behavior unchanged.","Aligned PLAN.md and 9306-traceability mapping for this subtask to treat the generator-hints scenarios as end-to-end at the generator level, keeping the planner and pipeline orchestrator responsibilities in their respective subtasks."],"refonly":{"anchors":["cov://§3#coverage-model","cov://§5#hint-types","cov://§6#execution-modes-ux"],"summary":"Generator-level coverage hints tests on oneOf+enum schemas are in place and treated as the end-to-end guided-hints scenario for 9306.9306005, with no changes required to the planner or pipeline orchestrator."}}
{"ts":"2025-11-29T12:33:25.3NZ","taskId":"9306.9306009","action":"subtask-completed","anchors":["cov://§4#generator-instrumentation","cov://§5#unsatisfied-hints-repair","cov://§7#json-coverage-report"],"touchedFiles":["packages/core/src/pipeline/orchestrator.ts","packages/core/src/generator/foundry-generator.ts","packages/core/src/repair/repair-engine.ts","packages/core/src/repair/__tests__/repair-hints.spec.ts",".taskmaster/docs/9306-traceability.md","PLAN.md"],"notes":["Introduced an internal per-instance hint trace shared between Generate and Repair for guided coverage runs, recording where preferBranch, coverEnumValue and ensurePropertyPresence hints are effectively applied without affecting RNG or JSON output shape.","Extended Repair to consume the shared hint trace and emit UnsatisfiedHint entries with reasonCode REPAIR_MODIFIED_VALUE on a best-effort basis when final AJV-valid instances no longer satisfy applied ensurePropertyPresence or coverEnumValue hints, while keeping unsatisfiedHints strictly diagnostic-only and preserving coverage metrics and exit code behavior.","Added a focused repair-hints test that drives repairItemsAjvDriven with a synthetic hint trace and asserts that Repair-side unsatisfied hints are recorded correctly for missing properties influenced by ensurePropertyPresence hints."],"refonly":{"anchors":["cov://§4#generator-instrumentation","cov://§5#unsatisfied-hints-repair","cov://§7#json-coverage-report"],"summary":"Guided runs now maintain a per-instance hint trace used by Repair to emit diagnostic UnsatisfiedHint entries when applied hints are no longer satisfied in final AJV-valid instances, without impacting coverage metrics or RNG determinism."}}
{"ts":"2025-11-29T14:05:00.000Z","taskId":"9308.9308001","action":"subtask-completed","anchors":["cov://§7#thresholds-mincoverage","cov://§7#cli-summary"],"touchedFiles":["PLAN.md",".taskmaster/docs/9308-traceability.md","packages/cli/src/index.ts","packages/cli/src/index.test.ts","packages/core/src/errors/codes.ts","packages/core/src/coverage/__tests__/coverage-report-json.test.ts","packages/core/test/unit/api.spec.ts","packages/core/test/e2e/coverage-guided-planner.spec.ts"],"notes":["Wired minCoverage through CoverageEvaluator metrics, coverage-report/v1 tests and CLI summary/exit plumbing plus Node API coverage assertions.","Adjusted the coverage-guided planner e2e fixture to use additionalProperties:false so Repair cleanly drops the guided property and records REPAIR_MODIFIED_VALUE, allowing executePipeline to finish and unsatisfied hints to surface while the rest of the suite now passes.","npm run build/typecheck/lint/test/bench (all commands now succeed, including the full vitest suite)."],"refonly":{"anchors":["cov://§7#thresholds-mincoverage","cov://§7#cli-summary"],"summary":"minCoverage thresholds are enforced end-to-end, the CLI now exits with the explicit coverage failure code, Node API exposures are tested, and the coverage-guided planner e2e run now completes with repair-side unsatisfied hints recorded."}}
{"ts":"2025-11-29T15:45:00.000Z","taskId":"9308.9308002","action":"subtask-completed","anchors":["cov://§7#cli-summary","cov://§7#thresholds-mincoverage"],"touchedFiles":["PLAN.md",".taskmaster/docs/9308-traceability.md",".taskmaster/tasks/tasks.json","packages/cli/src/index.ts","packages/cli/src/coverage/coverage-exit-codes.ts","packages/cli/src/coverage/coverage-exit-codes.test.ts"],"notes":["Factored the CLI coverage failure handling into a dedicated helper that formats the message, emits it to stderr, and exits via `ErrorCode.COVERAGE_THRESHOLD_NOT_MET`; extended the CLI generate tests to cover both measure and guided runs and added a helper-focused unit test to assert the message + exit code.","npm run build/typecheck/lint/test/bench (all commands succeed, including the full vitest suite)."],"refonly":{"anchors":["cov://§7#cli-summary","cov://§7#thresholds-mincoverage"],"summary":"CLI coverage failure now uses a dedicated helper + tests to keep the stderr summary and dedicated exit code aligned with the spec."}}
{"ts":"2025-11-29T13:37:03.000Z","taskId":"9306.9306010","action":"subtask-completed","anchors":["cov://§4#hint-trace-semantics","cov://§5#unsatisfied-hints-repair-interaction"],"touchedFiles":["packages/core/src/generator/foundry-generator.ts","packages/core/test/e2e/coverage-guided-planner.spec.ts","PLAN.md",".taskmaster/docs/9306-traceability.md"],"notes":["Tracked per-instance paths via a stack so ensurePropertyPresence hints on reused definitions record their actual containers before the hint trace is emitted and Repair validates them.","Added a guided coverage regression that tags #/$defs/shared/properties/guarded with ensurePropertyPresence and asserts guided runs no longer emit a false REPAIR_MODIFIED_VALUE entry after Repair."],"refonly":{"anchors":["cov://§4#hint-trace-semantics","cov://§5#unsatisfied-hints-repair-interaction"],"summary":"Instance paths for hint trace now follow reused definitions so Repair sees the correct container and guided runs avoid false REPAIR_MODIFIED_VALUE diagnostics for satisfied ensurePropertyPresence hints."}}
{"ts":"2025-11-29T15:00:00.000Z","taskId":"9308.9308001","action":"subtask-progress","anchors":["cov://§7#thresholds-mincoverage","cov://§7#cli-summary"],"touchedFiles":["PLAN.md",".taskmaster/docs/9308-traceability.md","packages/core/test/unit/api.spec.ts","packages/cli/src/index.test.ts"],"notes":["Extended the Node API and CLI coverage failure tests to cover guided-mode runs so minCoverage enforcement and the dedicated exit code stay aligned with the spec."],"refonly":{"anchors":["cov://§7#thresholds-mincoverage","cov://§7#cli-summary"],"summary":"Guided-mode runs now exercise the minCoverage threshold, and the CLI/Node API suites assert the dedicated coverage failure code plus coverageStatus reporting."}}
